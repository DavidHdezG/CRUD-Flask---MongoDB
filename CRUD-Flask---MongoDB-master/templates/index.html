<html lang="es">
    <head>
        <title>My App</title>
        <src href="main.py"></src>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
        <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
        <py-env>
            - pandas
        </py-env>
    </head>
    <body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

    <h1 class="display-1">Departaments</h1>
         <div>
            <h1 class="display-4">Department list</h1>
            
            <p id="csv"></p>
            <py-script>
                import pandas as pd

                if len({{dataDept}}) == 0:
                    print("There isn't data")

                df = pd.DataFrame({{dataDept}}, columns=['deptno', 'dname', 'loc'])
                df = df.rename(columns={"deptno":"department number", "dname":"department name", "loc":"location"})
                csv = Element('csv')
                csv.write(df)

            </py-script>
        </div>
        <div>
            <form method="POST" >
                {{ cformDept.hidden_tag() }}
                <fieldset>
                    <h1 class="display-4">Department insert</h1>
                    <div class="form-floating mb-3">
                        {{ cformDept.deptno(class_="form-control") }}
                        <label  for="cformDept-deptno">Department number to insert</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ cformDept.dname(class_="form-control") }}
                        <label  for="cformDept-dname">Department name</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ cformDept.loc(class_="form-control") }}
                        <label  for="cformDept-loc">Department location</label>
                    </div>
                        {{ cformDept.create(class_="btn btn-primary btn-lg")}}
                    </div>
                </fieldset>
            </form>
            <br>
            <form method="POST">
                {{ uformDept.hidden_tag() }}
                <fieldset>
                    <h1 class="display-4">Department update</h1>
                    <div class="form-floating mb-3">
                        {{ uformDept.deptno(class_="form-control") }}
                        <label  for="uformDept-deptno">Department to update (deptno, not going change)</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ uformDept.dname(class_="form-control") }}
                        <label  for="uformDept-dname">Department new name</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ uformDept.loc(class_="form-control") }}
                        <label  for="uformDept-loc">Department new location</label>
                    </div>
                    
                    {{ uformDept.update(class_="btn btn-primary btn-lg")}}
                </fieldset>
            </form>
            <br>
            <form method="POST">
                {{ dformDept.hidden_tag() }}
                <fieldset>
                    <h1 class="display-4">Department delete</h1>
                    <div class="form-floating mb-3">
                        {{ dformDept.deptno(class_="form-control") }}
                        <label  for="dformDept-deptno">Department to delete (deptno)</label>
                    </div>
                    {{ dformDept.delete(class_="btn btn-primary btn-lg")}}
                </fieldset>
            </form>
        </div>
    <h1 class="display-1">Employees</h1>
        <div>
            <h1 class="display-4">Employee list</h1>
            
            <p id="csv2"></p>
            <py-script>
                import pandas as pd

                if len({{dataEmp}}) == 0:
                    print("There isn't data")

                df = pd.DataFrame({{dataEmp}}, columns=['empno', 'ename', 'job', 'mgr', 'hiredate', 'sal', 'comm', 'deptno'])
                df = df.rename(columns={"empno":"Employee number", "ename":"Employee name", "job":"job", "mgr":"manager", "hiredate":"hiredate", "sal":"salary", "comm":"commision", "deptno":"department"})
                csv = Element('csv2')
                csv.write(df)

            </py-script>
        </div>
        <div class="emp">
            <form method="POST">
                {{ cformEmp.hidden_tag() }}
                <fieldset>
                    <h1 class="display-4">Employee insert</h1>
                    <div class="form-floating mb-3">
                        {{ cformEmp.empno(class_="form-control") }}
                        <label  for="cformEmp-empno">Employee ID to insert (Integer)</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ cformEmp.ename(class_="form-control") }}
                        <label  for="cformEmp-ename">Employee Name</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ cformEmp.job(class_="form-control") }}
                        <label  for="cformEmp-job">Employee job</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ cformEmp.mgr(class_="form-control") }}
                        <label  for="cformEmp-mgr">Employee manager ID (Integer)</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ cformEmp.hiredate(class_="form-control") }}
                        <label  for="cformEmp-hiredate">Employee hire date</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ cformEmp.sal(class_="form-control") }}
                        <label  for="cformEmp-sal">Employee salary (Integer)</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ cformEmp.comm(class_="form-control") }}
                        <label  for="cformEmp-comm">Employee commision (Integer)</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ cformEmp.deptno(class_="form-control") }}
                        <label  for="cformEmp-deptno">Employee department (Integer)</label>
                    </div>
                </div>
                    {{ cformEmp.create(class_="btn btn-primary btn-lg")}}
                </div>
                </fieldset>
            </form>
            <form method="POST">
                {{ uformEmp.hidden_tag() }}
                <fieldset>
                    <h1 class="display-4">Employee update</h1>
                    <div class="form-floating mb-3">
                        {{ uformEmp.empno(class_="form-control") }}
                        <label  for="uformEmp-empno">Employee ID to update (Integer, not going change)</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ uformEmp.ename(class_="form-control") }}
                        <label  for="uformEmp-ename">New Employee Name</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ uformEmp.job(class_="form-control") }}
                        <label  for="uformEmp-job">New Employee job</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ uformEmp.mgr(class_="form-control") }}
                        <label  for="uformEmp-mgr">New Employee manager ID (Integer)</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ uformEmp.hiredate(class_="form-control") }}
                        <label  for="uformEmp-hiredate">New Employee hire date</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ uformEmp.sal(class_="form-control") }}
                        <label  for="uformEmp-sal">New Employee salary (Integer)</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ uformEmp.comm(class_="form-control") }}
                        <label  for="uformEmp-comm">New Employee commision (Integer)</label>
                    </div>
                    <div class="form-floating mb-3">
                        {{ uformEmp.deptno(class_="form-control") }}
                        <label  for="uformEmp-deptno">New Employee department (Integer)</label>
                    </div>
                </div>
                    {{ uformEmp.update(class_="btn btn-primary btn-lg")}}
                </div>
                </fieldset>
            </form>
            <form method="POST">
                {{ dformEmp.hidden_tag() }}
                <fieldset>
                    <h1 class="display-4">Employee delete</h1>
                    <div class="form-floating mb-3">
                        {{ dformEmp.empno(class_="form-control") }}
                        <label  for="dformEmp-empno">Employee to delete (empno)</label>
                    </div>
                    {{ dformEmp.delete(class_="btn btn-primary btn-lg")}}
                </fieldset>
            </form>
        </div>
    </body>
</html>
